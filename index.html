<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Philips pasta maker vätskeproportioner</title>
  <style>
    :root { --pad: 14px; }
    * { box-sizing: border-box; }
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      margin: 0; padding: 32px 18px; background:#0f172a; color:#e5e7eb;
      display:flex; min-height:100dvh; align-items:center; justify-content:center;
    }
    .card {
      width: 100%; max-width: 620px; background: #111827; border: 1px solid #1f2937;
      border-radius: 18px; padding: 24px; box-shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    h1 { font-size: clamp(20px, 3.6vw, 28px); margin: 0 0 8px; letter-spacing:.2px; }
    p.sub { margin: 0 0 18px; color:#9ca3af; }
    label { display:block; font-weight:600; margin-bottom:8px; }
    .row { display:flex; gap:12px; align-items:end; flex-wrap:wrap; }
    input[type="text"], input[type="number"] {
      width: 220px; max-width:100%; background:#0b1220; color:#f3f4f6;
      border:1px solid #334155; border-radius:12px; padding:14px 14px; font-size:18px;
      outline:none; transition: border-color .2s;
    }
    input:focus { border-color:#60a5fa; box-shadow: 0 0 0 3px rgba(96,165,250,.2); }
    .out {
      flex:1; background:#0b1220; border:1px dashed #334155; border-radius:12px; padding:14px; min-height:56px;
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .value { font-size: clamp(22px, 5vw, 36px); font-variant-numeric: tabular-nums; }
    .hint { color:#94a3b8; font-size:14px; }
    .chips { display:flex; gap:8px; margin-top:10px; flex-wrap:wrap; }
    .chip {
      border:1px solid #334155; background:#0b1220; color:#cbd5e1; border-radius:999px; padding:8px 12px; cursor:pointer;
      user-select:none; font-size:14px; transition: transform .05s ease;
    }
    .chip:active { transform: scale(.98); }
    .muted { color:#9ca3af; font-size:12px; margin-top:12px; }
    .footer { margin-top:16px; display:flex; justify-content:space-between; align-items:center; gap:10px; flex-wrap:wrap; }
    .copy { border:1px solid #334155; background:#0b1220; color:#e5e7eb; border-radius:10px; padding:8px 10px; cursor:pointer; }
  </style>
</head>
<body>
  <main class="card">
    <h1>Philips pasta maker – vätskeproportioner</h1>
    <p class="sub">Skriv in mängd mjöl i gram. Appen räknar vätska i ml enligt formeln <code>ml = gram / 2,63157894</code>.</p>

    <label for="grams">Mjöl (g)</label>
    <div class="row">
      <input id="grams" type="text" inputmode="decimal" placeholder="t.ex. 300" autocomplete="off" />
      <div class="out">
        <div>
          <div class="hint">Rekommenderad vätska</div>
          <div class="value"><span id="ml">–</span> ml</div>
        </div>
        <button id="copy" class="copy" title="Kopiera ml">Kopiera</button>
      </div>
    </div>

    <div class="chips" aria-label="Snabbval">
      <div class="chip" data-g="200">200 g</div>
      <div class="chip" data-g="250">250 g</div>
      <div class="chip" data-g="300">300 g</div>
      <div class="chip" data-g="400">400 g</div>
    </div>

    <div class="muted">Tips: Du kan skriva både komma (,) och punkt (.) för decimaler. Resultatet avrundas till 1 decimal.</div>
    <div class="footer">
      <div class="muted">Formel: ml = gram / 2,63157894</div>
      <div class="muted" id="exact"></div>
    </div>
  </main>

  <script>
    const gramsEl = document.getElementById('grams');
    const mlEl = document.getElementById('ml');
    const exactEl = document.getElementById('exact');
    const copyBtn = document.getElementById('copy');
    const RATIO = 2.63157894;

    function parseNumber(s) {
      if (!s) return NaN;
      // Accept Swedish comma as decimal separator, strip spaces
      s = s.replace(/\s+/g, '').replace(',', '.');
      return Number(s);
    }

    function format1(x) {
      return x.toLocaleString('sv-SE', { minimumFractionDigits: 1, maximumFractionDigits: 1 });
    }

    function update() {
      const g = parseNumber(gramsEl.value);
      if (!isFinite(g) || g < 0) {
        mlEl.textContent = '–';
        exactEl.textContent = '';
        return;
      }
      const ml = g / RATIO;
      mlEl.textContent = format1(ml);
      exactEl.textContent = `Exakt: ${ml.toLocaleString('sv-SE', { maximumFractionDigits: 6 })} ml`;
    }

    gramsEl.addEventListener('input', update);

    document.querySelectorAll('.chip').forEach(chip => {
      chip.addEventListener('click', () => {
        gramsEl.value = chip.dataset.g;
        gramsEl.dispatchEvent(new Event('input'));
        gramsEl.focus();
      });
    });

    copyBtn.addEventListener('click', async () => {
      const text = mlEl.textContent.replace(/[^0-9,\.]/g, '');
      if (text && text !== '–') {
        try { await navigator.clipboard.writeText(text); copyBtn.textContent = 'Kopierat'; setTimeout(()=>copyBtn.textContent='Kopiera', 1600); } catch {}
      }
    });

    // Initial
    update();
  </script>
</body>
</html>
